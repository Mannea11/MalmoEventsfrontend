{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import'./BillettoComponent.css';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ApiComponent=_ref=>{let{apiUrl}=_ref;const[events,setEvents]=useState([]);const[uniqueVenueNames,setUniqueVenueNames]=useState([]);const[selectedVenue,setSelectedVenue]=useState('');const[selectedDateFilter,setSelectedDateFilter]=useState('all');const fetchData=useCallback(async()=>{try{const response=await fetch(apiUrl);if(!response.ok)throw new Error(response.statusText);const json=await response.json();console.log('API Response:',json);const eventsArray=json.items||[];const sortedEvents=eventsArray.sort((a,b)=>new Date(a.startUtc)-new Date(b.startUtc));setEvents(sortedEvents);const venues=[...new Set(eventsArray.map(evt=>{var _evt$venue;return((_evt$venue=evt.venue)===null||_evt$venue===void 0?void 0:_evt$venue.name)||'';}))];setUniqueVenueNames(venues);}catch(error){console.error('Error fetching API data:',error);}},[apiUrl]);useEffect(()=>{fetchData();},[fetchData]);const isToday=dateString=>{const eventDate=new Date(dateString);const today=new Date();return eventDate.toDateString()===today.toDateString();};const isWithinComingWeek=dateString=>{const eventDate=new Date(dateString);const today=new Date();const weekLater=new Date(today);weekLater.setDate(weekLater.getDate()+7);return eventDate>=today&&eventDate<=weekLater;};const isWithinComingMonth=dateString=>{const eventDate=new Date(dateString);const today=new Date();const monthLater=new Date(today);monthLater.setMonth(monthLater.getMonth()+1);return eventDate>=today&&eventDate<=monthLater;};const handleVenueChange=e=>setSelectedVenue(e.target.value);const handleDateFilterChange=e=>setSelectedDateFilter(e.target.value);const filteredEvents=events.filter(evt=>{var _evt$venue2;if(selectedVenue&&((_evt$venue2=evt.venue)===null||_evt$venue2===void 0?void 0:_evt$venue2.name)!==selectedVenue)return false;switch(selectedDateFilter){case'today':return isToday(evt.startUtc);case'week':return isWithinComingWeek(evt.startUtc);case'month':return isWithinComingMonth(evt.startUtc);default:return true;}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-container\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedVenue,onChange:handleVenueChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Alla lokaler\"}),uniqueVenueNames.map((venue,idx)=>/*#__PURE__*/_jsx(\"option\",{value:venue,children:venue},idx))]}),/*#__PURE__*/_jsxs(\"select\",{value:selectedDateFilter,onChange:handleDateFilterChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Alla datum\"}),/*#__PURE__*/_jsx(\"option\",{value:\"today\",children:\"Idag\"}),/*#__PURE__*/_jsx(\"option\",{value:\"week\",children:\"Inom 7 dagar\"}),/*#__PURE__*/_jsx(\"option\",{value:\"month\",children:\"Inom 30 dagar\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"events-container\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"event-list\",children:filteredEvents.map(evt=>{var _evt$_links,_evt$_links$find,_evt$venue3;return/*#__PURE__*/_jsx(\"li\",{className:\"event-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/ticksterEvent/\".concat(evt.id),className:\"event-link\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"event-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:((_evt$_links=evt._links)===null||_evt$_links===void 0?void 0:(_evt$_links$find=_evt$_links.find(link=>link.rel==='self'))===null||_evt$_links$find===void 0?void 0:_evt$_links$find.href)||'',alt:evt.name,className:\"event-image\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"event-title \".concat(evt.name.length>20?'event-title-small':''),children:evt.name}),/*#__PURE__*/_jsx(\"p\",{className:\"event-info\",children:((_evt$venue3=evt.venue)===null||_evt$venue3===void 0?void 0:_evt$venue3.name)||''}),/*#__PURE__*/_jsx(\"p\",{className:\"event-info\",children:formatDate(evt.startUtc)}),/*#__PURE__*/_jsx(\"p\",{className:\"event-info\",children:formatDate(evt.endUtc)}),/*#__PURE__*/_jsx(\"button\",{className:\"more-info-button\",children:\"Mer Info\"})]})})},evt.id);})})})]});};const formatDate=dateString=>{const options={year:'numeric',month:'numeric',day:'numeric',hour:'numeric',minute:'numeric',hour12:false};return new Date(dateString).toLocaleString(undefined,options);};export default ApiComponent;","map":{"version":3,"names":["React","useEffect","useState","useCallback","Link","jsx","_jsx","jsxs","_jsxs","ApiComponent","_ref","apiUrl","events","setEvents","uniqueVenueNames","setUniqueVenueNames","selectedVenue","setSelectedVenue","selectedDateFilter","setSelectedDateFilter","fetchData","response","fetch","ok","Error","statusText","json","console","log","eventsArray","items","sortedEvents","sort","a","b","Date","startUtc","venues","Set","map","evt","_evt$venue","venue","name","error","isToday","dateString","eventDate","today","toDateString","isWithinComingWeek","weekLater","setDate","getDate","isWithinComingMonth","monthLater","setMonth","getMonth","handleVenueChange","e","target","value","handleDateFilterChange","filteredEvents","filter","_evt$venue2","children","className","onChange","idx","_evt$_links","_evt$_links$find","_evt$venue3","to","concat","id","src","_links","find","link","rel","href","alt","length","formatDate","endUtc","options","year","month","day","hour","minute","hour12","toLocaleString","undefined"],"sources":["C:/Users/manne/Desktop/MalmoEventsFrontEnd/src/TicksterComponent.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport './BillettoComponent.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst ApiComponent = ({ apiUrl }) => {\r\n  const [events, setEvents] = useState([]);\r\n  const [uniqueVenueNames, setUniqueVenueNames] = useState([]);\r\n  const [selectedVenue, setSelectedVenue] = useState('');\r\n  const [selectedDateFilter, setSelectedDateFilter] = useState('all');\r\n\r\n\r\n  const fetchData = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(apiUrl);\r\n      if (!response.ok) throw new Error(response.statusText);\r\n      const json = await response.json();\r\n      console.log('API Response:', json);\r\n\r\n\r\n      const eventsArray = json.items || [];\r\n\r\n\r\n      const sortedEvents = eventsArray.sort(\r\n        (a, b) => new Date(a.startUtc) - new Date(b.startUtc)\r\n      );\r\n      setEvents(sortedEvents);\r\n\r\n\r\n      const venues = [...new Set(\r\n        eventsArray.map(evt => evt.venue?.name || '')\r\n      )];\r\n      setUniqueVenueNames(venues);\r\n    } catch (error) {\r\n      console.error('Error fetching API data:', error);\r\n    }\r\n  }, [apiUrl]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]);\r\n\r\n\r\n  const isToday = dateString => {\r\n    const eventDate = new Date(dateString);\r\n    const today = new Date();\r\n    return eventDate.toDateString() === today.toDateString();\r\n  };\r\n\r\n  const isWithinComingWeek = dateString => {\r\n    const eventDate = new Date(dateString);\r\n    const today = new Date();\r\n    const weekLater = new Date(today);\r\n    weekLater.setDate(weekLater.getDate() + 7);\r\n    return eventDate >= today && eventDate <= weekLater;\r\n  };\r\n\r\n  const isWithinComingMonth = dateString => {\r\n    const eventDate = new Date(dateString);\r\n    const today = new Date();\r\n    const monthLater = new Date(today);\r\n    monthLater.setMonth(monthLater.getMonth() + 1);\r\n    return eventDate >= today && eventDate <= monthLater;\r\n  };\r\n\r\n  \r\n  const handleVenueChange = e => setSelectedVenue(e.target.value);\r\n  const handleDateFilterChange = e => setSelectedDateFilter(e.target.value);\r\n\r\n\r\n  const filteredEvents = events.filter(evt => {\r\n    if (selectedVenue && evt.venue?.name !== selectedVenue) return false;\r\n\r\n    switch (selectedDateFilter) {\r\n      case 'today':\r\n        return isToday(evt.startUtc);\r\n      case 'week':\r\n        return isWithinComingWeek(evt.startUtc);\r\n      case 'month':\r\n        return isWithinComingMonth(evt.startUtc);\r\n      default:\r\n        return true;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"filter-container\">\r\n        <select value={selectedVenue} onChange={handleVenueChange}>\r\n          <option value=\"\">Alla lokaler</option>\r\n          {uniqueVenueNames.map((venue, idx) => (\r\n            <option key={idx} value={venue}>{venue}</option>\r\n          ))}\r\n        </select>\r\n        <select value={selectedDateFilter} onChange={handleDateFilterChange}>\r\n          <option value=\"all\">Alla datum</option>\r\n          <option value=\"today\">Idag</option>\r\n          <option value=\"week\">Inom 7 dagar</option>\r\n          <option value=\"month\">Inom 30 dagar</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"events-container\">\r\n        <ul className=\"event-list\">\r\n          {filteredEvents.map(evt => (\r\n            <li key={evt.id} className=\"event-item\">\r\n              <Link to={`/ticksterEvent/${evt.id}`} className=\"event-link\">\r\n                <div className=\"event-content\">\r\n                  <img\r\n                    src={evt._links?.find(link => link.rel === 'self')?.href || ''}\r\n                    alt={evt.name}\r\n                    className=\"event-image\"\r\n                  />\r\n                  <h3 className={`event-title ${evt.name.length > 20 ? 'event-title-small' : ''}`}>\r\n                    {evt.name}\r\n                  </h3>\r\n                  <p className=\"event-info\">{evt.venue?.name || ''}</p>\r\n                  <p className=\"event-info\">{formatDate(evt.startUtc)}</p>\r\n                  <p className=\"event-info\">{formatDate(evt.endUtc)}</p>\r\n                  <button className=\"more-info-button\">Mer Info</button>\r\n                </div>\r\n              </Link>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst formatDate = dateString => {\r\n  const options = { year: 'numeric', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric', hour12: false };\r\n  return new Date(dateString).toLocaleString(undefined, options);\r\n};\r\n\r\nexport default ApiComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}