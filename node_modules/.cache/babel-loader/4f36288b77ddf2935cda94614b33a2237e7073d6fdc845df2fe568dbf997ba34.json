{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import'./BillettoComponent.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ApiComponent=_ref=>{let{apiUrl}=_ref;const[events,setEvents]=useState([]);const[selectedVenue,setSelectedVenue]=useState('');const[selectedDateFilter,setSelectedDateFilter]=useState('all');const[uniqueVenueNames,setUniqueVenueNames]=useState([]);useEffect(()=>{fetch(apiUrl).then(response=>response.json()).then(json=>{console.log('API Response:',json);const eventsArray=json.data||[];const sortedEvents=eventsArray.sort((a,b)=>new Date(a.startdate)-new Date(b.startdate));setEvents(sortedEvents);const venues=[...new Set(eventsArray.map(event=>{var _event$location;return((_event$location=event.location)===null||_event$location===void 0?void 0:_event$location.city)||'';}))];setUniqueVenueNames(venues);}).catch(error=>console.error('Error fetching API data:',error));},[apiUrl]);const isToday=dateString=>{const eventDate=new Date(dateString);const today=new Date();return eventDate.toDateString()===today.toDateString();};const isWithinComingWeek=dateString=>{const eventDate=new Date(dateString);const today=new Date();const weekLater=new Date(today);weekLater.setDate(weekLater.getDate()+7);return eventDate>=today&&eventDate<=weekLater;};const isWithinComingMonth=dateString=>{const eventDate=new Date(dateString);const today=new Date();const monthLater=new Date(today);monthLater.setMonth(monthLater.getMonth()+1);return eventDate>=today&&eventDate<=monthLater;};const handleVenueChange=e=>setSelectedVenue(e.target.value);const handleDateFilterChange=e=>setSelectedDateFilter(e.target.value);const filteredEvents=events.filter(event=>{var _event$location2;if(selectedVenue&&((_event$location2=event.location)===null||_event$location2===void 0?void 0:_event$location2.city)!==selectedVenue){return false;}switch(selectedDateFilter){case'today':return isToday(event.startdate);case'week':return isWithinComingWeek(event.startdate);case'month':return isWithinComingMonth(event.startdate);default:return true;}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-container\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:handleVenueChange,value:selectedVenue,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Alla st\\xE4der\"}),uniqueVenueNames.map((city,idx)=>/*#__PURE__*/_jsx(\"option\",{value:city,children:city},idx))]}),/*#__PURE__*/_jsxs(\"select\",{onChange:handleDateFilterChange,value:selectedDateFilter,children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"Alla datum\"}),/*#__PURE__*/_jsx(\"option\",{value:\"today\",children:\"Idag\"}),/*#__PURE__*/_jsx(\"option\",{value:\"week\",children:\"Inom 7 dagar\"}),/*#__PURE__*/_jsx(\"option\",{value:\"month\",children:\"Inom 30 dagar\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"events-container\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"event-list\",children:filteredEvents.map(event=>{var _event$location3;return/*#__PURE__*/_jsx(\"li\",{className:\"event-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/BillettoEvent/\".concat(event.id),className:\"event-link\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"event-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:event.image_link,alt:event.title,className:\"event-image\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"event-title\",children:event.title}),/*#__PURE__*/_jsx(\"p\",{className:\"event-info\",children:((_event$location3=event.location)===null||_event$location3===void 0?void 0:_event$location3.city)||''}),/*#__PURE__*/_jsx(\"p\",{className:\"event-info\",children:formatDate(event.startdate)}),event.enddate&&/*#__PURE__*/_jsx(\"p\",{className:\"event-info\",children:formatDate(event.enddate)}),/*#__PURE__*/_jsx(\"button\",{className:\"more-info-button\",children:\"Mer Info\"})]})})},event.id);})})})]});};const formatDate=dateString=>{const options={year:'numeric',month:'numeric',day:'numeric',hour:'numeric',minute:'numeric',hour12:false};return new Date(dateString).toLocaleString(undefined,options);};export default ApiComponent;","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","ApiComponent","_ref","apiUrl","events","setEvents","selectedVenue","setSelectedVenue","selectedDateFilter","setSelectedDateFilter","uniqueVenueNames","setUniqueVenueNames","fetch","then","response","json","console","log","eventsArray","data","sortedEvents","sort","a","b","Date","startdate","venues","Set","map","event","_event$location","location","city","catch","error","isToday","dateString","eventDate","today","toDateString","isWithinComingWeek","weekLater","setDate","getDate","isWithinComingMonth","monthLater","setMonth","getMonth","handleVenueChange","e","target","value","handleDateFilterChange","filteredEvents","filter","_event$location2","children","className","onChange","idx","_event$location3","to","concat","id","src","image_link","alt","title","formatDate","enddate","options","year","month","day","hour","minute","hour12","toLocaleString","undefined"],"sources":["C:/Users/manne/Desktop/MalmoEventsFrontEnd/src/BillettoComponent.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './BillettoComponent.css';\r\n\r\nconst ApiComponent = ({ apiUrl }) => {\r\n  const [events, setEvents] = useState([]);\r\n  const [selectedVenue, setSelectedVenue] = useState('');\r\n  const [selectedDateFilter, setSelectedDateFilter] = useState('all');\r\n  const [uniqueVenueNames, setUniqueVenueNames] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch(apiUrl)\r\n      .then(response => response.json())\r\n      .then(json => {\r\n        console.log('API Response:', json);\r\n        const eventsArray = json.data || [];\r\n\r\n        const sortedEvents = eventsArray.sort(\r\n          (a, b) => new Date(a.startdate) - new Date(b.startdate)\r\n        );\r\n        setEvents(sortedEvents);\r\n\r\n        const venues = [...new Set(\r\n          eventsArray.map(event => event.location?.city || '')\r\n        )];\r\n        setUniqueVenueNames(venues);\r\n      })\r\n      .catch(error => console.error('Error fetching API data:', error));\r\n  }, [apiUrl]);\r\n\r\n  const isToday = dateString => {\r\n    const eventDate = new Date(dateString);\r\n    const today = new Date();\r\n    return eventDate.toDateString() === today.toDateString();\r\n  };\r\n\r\n  const isWithinComingWeek = dateString => {\r\n    const eventDate = new Date(dateString);\r\n    const today = new Date();\r\n    const weekLater = new Date(today);\r\n    weekLater.setDate(weekLater.getDate() + 7);\r\n    return eventDate >= today && eventDate <= weekLater;\r\n  };\r\n\r\n  const isWithinComingMonth = dateString => {\r\n    const eventDate = new Date(dateString);\r\n    const today = new Date();\r\n    const monthLater = new Date(today);\r\n    monthLater.setMonth(monthLater.getMonth() + 1);\r\n    return eventDate >= today && eventDate <= monthLater;\r\n  };\r\n\r\n\r\n  const handleVenueChange = e => setSelectedVenue(e.target.value);\r\n  const handleDateFilterChange = e => setSelectedDateFilter(e.target.value);\r\n\r\n  const filteredEvents = events.filter(event => {\r\n    if (selectedVenue && event.location?.city !== selectedVenue) {\r\n      return false;\r\n    }\r\n    switch (selectedDateFilter) {\r\n      case 'today':\r\n        return isToday(event.startdate);\r\n      case 'week':\r\n        return isWithinComingWeek(event.startdate);\r\n      case 'month':\r\n        return isWithinComingMonth(event.startdate);\r\n      default:\r\n        return true;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"filter-container\">\r\n        <select onChange={handleVenueChange} value={selectedVenue}>\r\n          <option value=\"\">Alla st√§der</option>\r\n          {uniqueVenueNames.map((city, idx) => (\r\n            <option key={idx} value={city}>{city}</option>\r\n          ))}\r\n        </select>\r\n        <select onChange={handleDateFilterChange} value={selectedDateFilter}>\r\n          <option value=\"all\">Alla datum</option>\r\n          <option value=\"today\">Idag</option>\r\n          <option value=\"week\">Inom 7 dagar</option>\r\n          <option value=\"month\">Inom 30 dagar</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"events-container\">\r\n        <ul className=\"event-list\">\r\n          {filteredEvents.map(event => (\r\n            <li key={event.id} className=\"event-item\">\r\n              <Link to={`/BillettoEvent/${event.id}`} className=\"event-link\">\r\n                <div className=\"event-content\">\r\n                  <img\r\n                    src={event.image_link}\r\n                    alt={event.title}\r\n                    className=\"event-image\"\r\n                  />\r\n                  <h3 className=\"event-title\">{event.title}</h3>\r\n                  <p className=\"event-info\">{event.location?.city || ''}</p>\r\n                  <p className=\"event-info\">{formatDate(event.startdate)}</p>\r\n                  {event.enddate && (\r\n                    <p className=\"event-info\">{formatDate(event.enddate)}</p>\r\n                  )}\r\n                  <button className=\"more-info-button\">Mer Info</button>\r\n                </div>\r\n              </Link>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst formatDate = dateString => {\r\n  const options = {\r\n    year: 'numeric',\r\n    month: 'numeric',\r\n    day: 'numeric',\r\n    hour: 'numeric',\r\n    minute: 'numeric',\r\n    hour12: false,\r\n  };\r\n  return new Date(dateString).toLocaleString(undefined, options);\r\n};\r\n\r\nexport default ApiComponent;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjC,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC9B,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACW,aAAa,CAAEC,gBAAgB,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACa,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAACe,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAE5DD,SAAS,CAAC,IAAM,CACdkB,KAAK,CAACT,MAAM,CAAC,CACVU,IAAI,CAACC,QAAQ,EAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACE,IAAI,EAAI,CACZC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEF,IAAI,CAAC,CAClC,KAAM,CAAAG,WAAW,CAAGH,IAAI,CAACI,IAAI,EAAI,EAAE,CAEnC,KAAM,CAAAC,YAAY,CAAGF,WAAW,CAACG,IAAI,CACnC,CAACC,CAAC,CAAEC,CAAC,GAAK,GAAI,CAAAC,IAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CAAG,GAAI,CAAAD,IAAI,CAACD,CAAC,CAACE,SAAS,CACxD,CAAC,CACDpB,SAAS,CAACe,YAAY,CAAC,CAEvB,KAAM,CAAAM,MAAM,CAAG,CAAC,GAAG,GAAI,CAAAC,GAAG,CACxBT,WAAW,CAACU,GAAG,CAACC,KAAK,OAAAC,eAAA,OAAI,EAAAA,eAAA,CAAAD,KAAK,CAACE,QAAQ,UAAAD,eAAA,iBAAdA,eAAA,CAAgBE,IAAI,GAAI,EAAE,GACrD,CAAC,CAAC,CACFrB,mBAAmB,CAACe,MAAM,CAAC,CAC7B,CAAC,CAAC,CACDO,KAAK,CAACC,KAAK,EAAIlB,OAAO,CAACkB,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAAC,CACrE,CAAC,CAAE,CAAC/B,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAgC,OAAO,CAAGC,UAAU,EAAI,CAC5B,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAb,IAAI,CAACY,UAAU,CAAC,CACtC,KAAM,CAAAE,KAAK,CAAG,GAAI,CAAAd,IAAI,CAAC,CAAC,CACxB,MAAO,CAAAa,SAAS,CAACE,YAAY,CAAC,CAAC,GAAKD,KAAK,CAACC,YAAY,CAAC,CAAC,CAC1D,CAAC,CAED,KAAM,CAAAC,kBAAkB,CAAGJ,UAAU,EAAI,CACvC,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAb,IAAI,CAACY,UAAU,CAAC,CACtC,KAAM,CAAAE,KAAK,CAAG,GAAI,CAAAd,IAAI,CAAC,CAAC,CACxB,KAAM,CAAAiB,SAAS,CAAG,GAAI,CAAAjB,IAAI,CAACc,KAAK,CAAC,CACjCG,SAAS,CAACC,OAAO,CAACD,SAAS,CAACE,OAAO,CAAC,CAAC,CAAG,CAAC,CAAC,CAC1C,MAAO,CAAAN,SAAS,EAAIC,KAAK,EAAID,SAAS,EAAII,SAAS,CACrD,CAAC,CAED,KAAM,CAAAG,mBAAmB,CAAGR,UAAU,EAAI,CACxC,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAb,IAAI,CAACY,UAAU,CAAC,CACtC,KAAM,CAAAE,KAAK,CAAG,GAAI,CAAAd,IAAI,CAAC,CAAC,CACxB,KAAM,CAAAqB,UAAU,CAAG,GAAI,CAAArB,IAAI,CAACc,KAAK,CAAC,CAClCO,UAAU,CAACC,QAAQ,CAACD,UAAU,CAACE,QAAQ,CAAC,CAAC,CAAG,CAAC,CAAC,CAC9C,MAAO,CAAAV,SAAS,EAAIC,KAAK,EAAID,SAAS,EAAIQ,UAAU,CACtD,CAAC,CAGD,KAAM,CAAAG,iBAAiB,CAAGC,CAAC,EAAI1C,gBAAgB,CAAC0C,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAC/D,KAAM,CAAAC,sBAAsB,CAAGH,CAAC,EAAIxC,qBAAqB,CAACwC,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAEzE,KAAM,CAAAE,cAAc,CAAGjD,MAAM,CAACkD,MAAM,CAACzB,KAAK,EAAI,KAAA0B,gBAAA,CAC5C,GAAIjD,aAAa,EAAI,EAAAiD,gBAAA,CAAA1B,KAAK,CAACE,QAAQ,UAAAwB,gBAAA,iBAAdA,gBAAA,CAAgBvB,IAAI,IAAK1B,aAAa,CAAE,CAC3D,MAAO,MAAK,CACd,CACA,OAAQE,kBAAkB,EACxB,IAAK,OAAO,CACV,MAAO,CAAA2B,OAAO,CAACN,KAAK,CAACJ,SAAS,CAAC,CACjC,IAAK,MAAM,CACT,MAAO,CAAAe,kBAAkB,CAACX,KAAK,CAACJ,SAAS,CAAC,CAC5C,IAAK,OAAO,CACV,MAAO,CAAAmB,mBAAmB,CAACf,KAAK,CAACJ,SAAS,CAAC,CAC7C,QACE,MAAO,KAAI,CACf,CACF,CAAC,CAAC,CAEF,mBACEzB,KAAA,QAAAwD,QAAA,eACExD,KAAA,QAAKyD,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/BxD,KAAA,WAAQ0D,QAAQ,CAAEV,iBAAkB,CAACG,KAAK,CAAE7C,aAAc,CAAAkD,QAAA,eACxD1D,IAAA,WAAQqD,KAAK,CAAC,EAAE,CAAAK,QAAA,CAAC,gBAAW,CAAQ,CAAC,CACpC9C,gBAAgB,CAACkB,GAAG,CAAC,CAACI,IAAI,CAAE2B,GAAG,gBAC9B7D,IAAA,WAAkBqD,KAAK,CAAEnB,IAAK,CAAAwB,QAAA,CAAExB,IAAI,EAAvB2B,GAAgC,CAC9C,CAAC,EACI,CAAC,cACT3D,KAAA,WAAQ0D,QAAQ,CAAEN,sBAAuB,CAACD,KAAK,CAAE3C,kBAAmB,CAAAgD,QAAA,eAClE1D,IAAA,WAAQqD,KAAK,CAAC,KAAK,CAAAK,QAAA,CAAC,YAAU,CAAQ,CAAC,cACvC1D,IAAA,WAAQqD,KAAK,CAAC,OAAO,CAAAK,QAAA,CAAC,MAAI,CAAQ,CAAC,cACnC1D,IAAA,WAAQqD,KAAK,CAAC,MAAM,CAAAK,QAAA,CAAC,cAAY,CAAQ,CAAC,cAC1C1D,IAAA,WAAQqD,KAAK,CAAC,OAAO,CAAAK,QAAA,CAAC,eAAa,CAAQ,CAAC,EACtC,CAAC,EACN,CAAC,cAEN1D,IAAA,QAAK2D,SAAS,CAAC,kBAAkB,CAAAD,QAAA,cAC/B1D,IAAA,OAAI2D,SAAS,CAAC,YAAY,CAAAD,QAAA,CACvBH,cAAc,CAACzB,GAAG,CAACC,KAAK,OAAA+B,gBAAA,oBACvB9D,IAAA,OAAmB2D,SAAS,CAAC,YAAY,CAAAD,QAAA,cACvC1D,IAAA,CAACF,IAAI,EAACiE,EAAE,mBAAAC,MAAA,CAAoBjC,KAAK,CAACkC,EAAE,CAAG,CAACN,SAAS,CAAC,YAAY,CAAAD,QAAA,cAC5DxD,KAAA,QAAKyD,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC5B1D,IAAA,QACEkE,GAAG,CAAEnC,KAAK,CAACoC,UAAW,CACtBC,GAAG,CAAErC,KAAK,CAACsC,KAAM,CACjBV,SAAS,CAAC,aAAa,CACxB,CAAC,cACF3D,IAAA,OAAI2D,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAE3B,KAAK,CAACsC,KAAK,CAAK,CAAC,cAC9CrE,IAAA,MAAG2D,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAE,EAAAI,gBAAA,CAAA/B,KAAK,CAACE,QAAQ,UAAA6B,gBAAA,iBAAdA,gBAAA,CAAgB5B,IAAI,GAAI,EAAE,CAAI,CAAC,cAC1DlC,IAAA,MAAG2D,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAEY,UAAU,CAACvC,KAAK,CAACJ,SAAS,CAAC,CAAI,CAAC,CAC1DI,KAAK,CAACwC,OAAO,eACZvE,IAAA,MAAG2D,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAEY,UAAU,CAACvC,KAAK,CAACwC,OAAO,CAAC,CAAI,CACzD,cACDvE,IAAA,WAAQ2D,SAAS,CAAC,kBAAkB,CAAAD,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACnD,CAAC,CACF,CAAC,EAhBA3B,KAAK,CAACkC,EAiBX,CAAC,EACN,CAAC,CACA,CAAC,CACF,CAAC,EACH,CAAC,CAEV,CAAC,CAED,KAAM,CAAAK,UAAU,CAAGhC,UAAU,EAAI,CAC/B,KAAM,CAAAkC,OAAO,CAAG,CACdC,IAAI,CAAE,SAAS,CACfC,KAAK,CAAE,SAAS,CAChBC,GAAG,CAAE,SAAS,CACdC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,KACV,CAAC,CACD,MAAO,IAAI,CAAApD,IAAI,CAACY,UAAU,CAAC,CAACyC,cAAc,CAACC,SAAS,CAAER,OAAO,CAAC,CAChE,CAAC,CAED,cAAe,CAAArE,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}